scoreboard players add .nextID mechID 1
summon armor_stand ~ ~ ~ {NoGravity:0b,Silent:1b,Invulnerable:1b,Invisible:1b,Tags:["mech","mechPart","newMech","active"],attributes:[{id:"minecraft:step_height",base:1}],Passengers:[{id:"minecraft:item_display",start_interpolation:0,interpolation_duration:1,teleport_duration:1,Tags:["mechUpperBody","rotatablePart","mechPart","newMech"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,1f,0f],scale:[2f,2f,2f]},item:{id:"minecraft:knowledge_book",count:1,components:{"minecraft:item_model":"mech:mech_parts/upper_body","custom_model_data":{floats:[1],strings:["minecraft:gray_dye"]}}}},{id:"minecraft:item_display",teleport_duration:5,Tags:["mechLowerBody","mechPart","newMech"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,1f,0f],scale:[2f,2f,2f]},item:{id:"minecraft:knowledge_book",count:1,components:{"minecraft:item_model":"mech:mech_parts/lower_body"}}},{id:"minecraft:interaction",width:1f,height:2f,Tags:["mechInteraction","mechPart","newMech"]},{id:"minecraft:text_display",teleport_duration:1,Tags:["mechHPDisplay","mechHUD","mechPart","newMech"],brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-0.4f,0.4f,-0.8f],scale:[1f,1f,1f]},text:[{'text':'100%',color:'green'}],background:16711680},{id:"minecraft:text_display",teleport_duration:1,Tags:["mechEnergyDisplay","mechHUD","mechPart","newMech"],brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0.3f,0.4f,-0.8f],scale:[1f,1f,1f]},text:[{'text':'100%',color:'blue'}],background:16711680},{id:"minecraft:item_display",teleport_duration:1,Tags:["leftMechArm","rotatablePart","mechPart","newMech"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[1.5f,1f,0f],scale:[2.5f,2.5f,2.5f]}},{id:"minecraft:item_display",teleport_duration:1,Tags:["rightMechArm","rotatablePart","mechPart","newMech"],transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[-1.5f,1f,0f],scale:[2.5f,2.5f,2.5f]}}]}
execute as @e[tag=newMech] store result score @s mechID run scoreboard players get .nextID mechID
scoreboard players set @n[tag=mech,tag=newMech] mechPowerPercent 100
scoreboard players set @n[tag=mech,tag=newMech] mechHealth 100
tag @e[tag=newMech] remove newMech
